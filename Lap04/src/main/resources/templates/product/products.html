<!DOCTYPE html>
<html lang="en"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{_layout}">

<head>
    <meta charset="UTF-8">
    <title>List products</title>
</head>

<body>

<div layout:fragment="content" class="container body-content">

    <h2 class="mb-3">Product List</h2>

    <a th:href="@{/products/create}"
       class="btn btn-primary mb-3">
        Create New Product
    </a>

    <table class="table table-striped table-bordered">

        <thead class="table-dark">
        <tr>
            <th>#</th>
            <th>Name</th>
            <th>Price</th>
            <th>Image</th>
            <th>Category</th>
            <th width="150">Action</th>
        </tr>
        </thead>

        <tbody>

        <tr th:if="${#lists.isEmpty(listproduct)}">
            <td colspan="6" class="text-center">
                No products found
            </td>
        </tr>

        <tr th:each="product : ${listproduct}">
            <td th:text="${product.id}"></td>
            <td th:text="${product.name}"></td>
            <td th:text="${product.price}"></td>

            <!-- Image safe -->
            <td>
                <img th:if="${product.image != null}"
                     th:src="@{'/images/' + ${product.image}}"
                     width="120">

                <span th:if="${product.image == null}">
                    No image
                </span>
            </td>

            <!-- Category safe -->
            <td th:text="${product.category != null ? product.category.name : 'None'}"></td>

            <td>
                <a th:href="@{/products/edit/{id}(id=${product.id})}"
                   class="btn btn-secondary btn-sm">
                    Edit
                </a>

                <a th:href="@{/products/delete/{id}(id=${product.id})}"
                   class="btn btn-danger btn-sm"
                   onclick="return confirm('Delete this product?')">
                    Delete
                </a>
            </td>
        </tr>

        </tbody>

    </table>

</div>

</body>
</html>
